
// an interface which all validator types must implement
type TypeValidator interface = {
    validate(c: HTTPContext | WSRoute) => Promise<void>
}

The validators member on the XerusRoute allows us the list a series of middlwares that will be stacked at the front of our middleware chain just before compilation. This means that these validation middleware must run first. The TypeValidator interface is used on any type to make it validatable by Xerus. A type may implement a validate method which can throw an error is something is wrong with the type. This should be easy to use with petty much any type we might use in our system. We might evn need a Source.CUSTOM for custom types we want to pipe into the system and essentially inject with a dependancy injection type pattern. This enables us to We also need the lifecycle methods implemented, and we need to change Route.validate to Route.preHandle. Please help me complete these changes.

After this is done, validation should feel seemless.

class SomeRoute<WSContext or NONE for HTTPContext> extends XerusRoute {
  path: string = "/user/:id"
  method: string = "GET" // or whatever the enum is
  validators: [
    Validator(Source.JSON, SomeJSONClass),
    Validator(Source.FORM, SomeFormClass),
    Validator(Source.PARAM, SomeParamClass),
    Validator(Source.WSMESSAGE, SomeMessageClass),
    Validator(Source.QUERY, SomeQueryClass),
  ]
  constructor() {} // usually non present
  async handle(c: HTTPContext or WSContext) {
    // handle endpoint
    let someForm = this.data(SomeFormClass) // get form data
    let someParam = this.data(SomeParamClass) // get param data
    let someQuery = this.data(SomeQueryClass) // get query data
    // ect...
  }
  onMount(c: HTTPContext | WSContext) {
    // lifecycle method runs prior to handler being registered
    // good for middleware
  }
  preHandle(c: HTTPContext | WsContext) {
    // new life-cycle method, good for replacing Route.validate()
    // this is all the logic that should be ran prior to the handler
    // thus making it a great place for validation logic to be ran
    // so it should actually just replace the validation method
  }
  postHandler(c: HTTPContext | WsContext) {
    // new lifecycle method for running after a handler is handled
  }
  onErr(c: HTTPContext | WSContext, err: Error) {
    // for handling errors
  }
}
